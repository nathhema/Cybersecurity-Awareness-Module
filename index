<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cybersecurity Awareness Module</title>

    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Custom styles to complement Tailwind */
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .module-section {
            display: none;
            /* All sections hidden by default */
        }
        
        .module-section.active {
            display: block;
            /* Active section is shown */
        }
        /* Style for the phishing email hotspots */
        
        .phish-hotspot {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 2px dashed transparent;
        }
        
        .phish-hotspot:hover {
            border: 2px dashed #fbbf24;
            /* amber-400 */
            background-color: #fefce8;
            /* yellow-50 */
        }
        
        .phish-hotspot.found {
            border: 2px solid #22c55e;
            /* green-500 */
            background-color: #f0fdf4;
            /* green-50 */
            cursor: default;
        }
        /* Custom styles for quiz feedback */
        
        .quiz-option.correct {
            background-color: #dcfce7;
            /* green-100 */
            border-color: #22c55e;
            /* green-500 */
        }
        
        .quiz-option.incorrect {
            background-color: #fee2e2;
            /* red-100 */
            border-color: #ef4444;
            /* red-500 */
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-800">

    <div class="container mx-auto max-w-4xl p-4 sm:p-6 md:p-8">

        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-slate-900">CyberSecurity Essentials 2025</h1>
            <p class="text-slate-600 mt-2">Your First Line of Defense</p>
        </header>

        <!-- Progress Bar -->
        <div class="w-full bg-slate-200 rounded-full h-2.5 mb-8">
            <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%; transition: width 0.5s ease-in-out;"></div>
        </div>

        <!-- Module Content Area -->
        <main id="module-container" class="bg-white p-6 sm:p-8 rounded-xl shadow-lg">

            <!-- ===== Introduction Section ===== -->
            <section id="section-intro" class="module-section active">
                <h2 class="text-2xl font-bold mb-4">Welcome to Your Training!</h2>
                <div class="space-y-4 text-slate-700">
                    <p>In today's digital world, cybersecurity isn't just for the IT department—it's everyone's responsibility. This 15-minute module will empower you with the essential knowledge to protect yourself and our organization from common cyber
                        threats.</p>
                    <div>
                        <h3 class="font-semibold text-lg mb-2">Learning Objectives:</h3>
                        <ul class="list-disc list-inside space-y-1">
                            <li><strong>Identify</strong> common threats like phishing and malware.</li>
                            <li><strong>Recognize</strong> the signs of a malicious email.</li>
                            <li><strong>Apply</strong> best practices for creating strong passwords.</li>
                            <li><strong>Understand</strong> the importance of browsing safely.</li>
                        </ul>
                    </div>
                </div>
                <div class="text-right mt-8">
                    <button type="button" onclick="navigateTo('section-1')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition">
                        Start Module
                    </button>
                </div>
            </section>

            <!-- ===== Section 1: Threat Landscape ===== -->
            <section id="section-1" class="module-section">
                <h2 class="text-2xl font-bold mb-4">Part 1: The Threat Landscape</h2>
                <div class="space-y-4 text-slate-700">
                    <h3 class="font-semibold text-lg">What is Cybersecurity?</h3>
                    <p>Think of it as the digital equivalent of locking your house doors. It's a set of practices to protect our computer systems and data from theft, damage, or unauthorized access. A single mistake, like clicking a bad link, can lead to
                        significant consequences like data breaches, financial loss, and reputational damage.</p>

                    <h3 class="font-semibold text-lg">Meet the "Bad Actors"</h3>
                    <div class="flex items-start space-x-4 p-4 bg-slate-50 rounded-lg">
                        <svg class="w-6 h-6 text-red-500 shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                        <div>
                            <h4 class="font-bold">Phishing & Social Engineering</h4>
                            <p class="text-sm">Fraudulent attempts (usually via email) to trick you into revealing sensitive information. This is a form of manipulating people to give up confidential info.</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4 p-4 bg-slate-50 rounded-lg">
                        <svg class="w-6 h-6 text-red-500 shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>
                        <div>
                            <h4 class="font-bold">Malware</h4>
                            <p class="text-sm">Malicious software (viruses, ransomware, spyware) designed to disrupt operations or gain access to your system.</p>
                        </div>
                    </div>
                </div>
                <div class="flex justify-between mt-8">
                    <button type="button" onclick="navigateTo('section-intro')" class="bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-2 px-6 rounded-lg transition">Back</button>
                    <button type="button" onclick="navigateTo('section-2')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition">Continue</button>
                </div>
            </section>

            <!-- ===== Section 2: Phishing ===== -->
            <section id="section-2" class="module-section">
                <h2 class="text-2xl font-bold mb-4">Part 2: Don't Get Hooked!</h2>
                <p class="mb-6 text-slate-700">Phishing is the #1 threat. Scammers are clever, but their tricks have tell-tale signs. Click on the <strong>5 red flags</strong> in the email below.</p>

                <!-- Interactive Phishing Email -->
                <div class="border rounded-lg p-4 bg-white shadow-inner">
                    <div class="flex justify-between items-center border-b pb-2 mb-2">
                        <p class="font-bold text-lg">New message</p>
                        <p id="phish-counter" class="text-sm font-semibold bg-amber-100 text-amber-800 px-3 py-1 rounded-full">Flags found: 0 / 5</p>
                    </div>
                    <p class="text-sm text-slate-600"><strong>From:</strong> <span class="phish-hotspot" data-flag="1" onclick="spotPhish(this, 1)">IT Support &lt;support-team@mail-service.com&gt;</span></p>
                    <p class="text-sm text-slate-600"><strong>Subject:</strong> <span class="phish-hotspot" data-flag="2" onclick="spotPhish(this, 2)">URGENT: Your Email Password has Expired</span></p>
                    <hr class="my-3">
                    <div class="text-slate-800 space-y-4">
                        <p><span class="phish-hotspot" data-flag="3" onclick="spotPhish(this, 3)">Dear user,</span></p>
                        <p>Your corporate password has expired. You must reset it <span class="phish-hotspot" data-flag="4" onclick="spotPhish(this, 4)">immediatly</span> to avoid account lockout.</p>
                        <p>Please <span class="phish-hotspot" data-flag="5" onclick="spotPhish(this, 5)"><a href="#" onclick="event.preventDefault();" class="text-blue-600 underline hover:text-blue-800">click here to update your details</a></span>.</p>
                        <p>Thank you,<br>IT System Admin</p>
                    </div>
                </div>
                <div id="phish-feedback" class="mt-4 text-center"></div>

                <div class="flex justify-between mt-8">
                    <button type="button" onclick="navigateTo('section-1')" class="bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-2 px-6 rounded-lg transition">Back</button>
                    <button type="button" id="section-2-continue" onclick="navigateTo('section-3')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition" disabled>Continue</button>
                </div>
            </section>

            <!-- ===== Section 3: Passwords ===== -->
            <section id="section-3" class="module-section">
                <h2 class="text-2xl font-bold mb-4">Part 3: Passwords & Access Control</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="space-y-4 text-slate-700">
                        <h3 class="font-semibold text-lg">Creating a Strong Password</h3>
                        <p>Your password is the key to your digital life. A strong password is a long passphrase.</p>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>Length is Strength:</strong> Aim for 14+ characters.</li>
                            <li><strong>Be Unique:</strong> Use a different password for every important account.</li>
                            <li><strong>Use a Password Manager:</strong> They create and store complex passwords securely.</li>
                        </ul>
                        <h3 class="font-semibold text-lg mt-4">Multi-Factor Authentication (MFA)</h3>
                        <p>MFA is one of the most effective security measures. It requires a second piece of info (like a code from your phone) besides your password. <strong>Always enable MFA.</strong></p>
                    </div>
                    <!-- Interactive Password Strength Checker -->
                    <div class="bg-slate-50 p-4 rounded-lg">
                        <h3 class="font-semibold text-lg mb-2">Test Your Password Strength</h3>
                        <input type="text" id="password-input" class="w-full p-2 border border-slate-300 rounded-md" placeholder="Type a password here...">
                        <div class="w-full bg-slate-200 rounded-full h-2.5 mt-3">
                            <div id="password-strength-bar" class="h-2.5 rounded-full" style="width: 0%; transition: all 0.3s;"></div>
                        </div>
                        <p id="password-strength-text" class="text-sm mt-2 text-center font-medium"></p>
                        <ul id="password-criteria" class="text-xs text-slate-600 mt-2 space-y-1">
                            <li id="crit-length">- At least 12 characters</li>
                            <li id="crit-lower">- A lowercase letter</li>
                            <li id="crit-upper">- An uppercase letter</li>
                            <li id="crit-number">- A number</li>
                            <li id="crit-special">- A special character (!@#$)</li>
                        </ul>
                    </div>
                </div>
                <div class="flex justify-between mt-8">
                    <button type="button" onclick="navigateTo('section-2')" class="bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-2 px-6 rounded-lg transition">Back</button>
                    <button type="button" onclick="navigateTo('section-quiz')" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition">Continue to Quiz</button>
                </div>
            </section>

            <!-- ===== Section 4: Quiz ===== -->
            <section id="section-quiz" class="module-section">
                <h2 class="text-2xl font-bold mb-4">Part 4: Final Quiz</h2>
                <p class="mb-6 text-slate-700">Time to test your knowledge! You must score at least 4 out of 5 to pass.</p>
                <form id="quiz-form" class="space-y-6">
                    <!-- Question 1 -->
                    <div>
                        <p class="font-semibold mb-2">1. You receive an email with a subject line "Invoice OVERDUE" from a company you don't recognize. It has a PDF attachment. What should you do?</p>
                        <div class="space-y-2">
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q1" value="a" class="mr-2">Open the attachment to see what it's for.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q1" value="b" class="mr-2">Reply and ask them who they are.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q1" value="c" class="mr-2">Delete the email and report it as phishing.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q1" value="d" class="mr-2">Forward it to your personal email to check later.</label>
                        </div>
                    </div>
                    <!-- Question 2 -->
                    <div>
                        <p class="font-semibold mb-2">2. Which of the following is the strongest password?</p>
                        <div class="space-y-2">
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q2" value="a" class="mr-2">Summer2025!</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q2" value="b" class="mr-2">MyP@ssword</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q2" value="c" class="mr-2">Oranges-Grow-On-Tall-Trees</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q2" value="d" class="mr-2">12345678</label>
                        </div>
                    </div>
                    <!-- Question 3 -->
                    <div>
                        <p class="font-semibold mb-2">3. What is Multi-Factor Authentication (MFA)?</p>
                        <div class="space-y-2">
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q3" value="a" class="mr-2">A very long and complex password.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q3" value="b" class="mr-2">A second layer of security in addition to your password.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q3" value="c" class="mr-2">Software that automatically fills in your passwords.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q3" value="d" class="mr-2">A type of computer virus.</label>
                        </div>
                    </div>
                    <!-- Question 4 -->
                    <div>
                        <p class="font-semibold mb-2">4. Hovering your mouse over a link in an email shows you...</p>
                        <div class="space-y-2">
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q4" value="a" class="mr-2">...if the link is safe to click.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q4" value="b" class="mr-2">...the actual web address the link will take you to.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q4" value="c" class="mr-2">...who sent the email.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q4" value="d" class="mr-2">...nothing useful.</label>
                        </div>
                    </div>
                    <!-- Question 5 -->
                    <div>
                        <p class="font-semibold mb-2">5. You get a text message from an unknown number saying "Your package has a delivery issue. Click here to resolve: [shortened link]". This is likely an example of:</p>
                        <div class="space-y-2">
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q5" value="a" class="mr-2">A legitimate delivery notification.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q5" value="b" class="mr-2">A wrong number.</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q5" value="c" class="mr-2">"Smishing" (SMS Phishing).</label>
                            <label class="block p-3 border-2 border-slate-200 rounded-lg hover:bg-slate-50 quiz-option"><input type="radio" name="q5" value="d" class="mr-2">A system error.</label>
                        </div>
                    </div>
                    <div id="quiz-result" class="text-center font-bold mt-6"></div>
                    <div class="flex justify-between mt-8">
                        <button type="button" onclick="navigateTo('section-3')" class="bg-slate-200 hover:bg-slate-300 text-slate-800 font-bold py-2 px-6 rounded-lg transition">Back</button>
                        <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg shadow transition">Submit Quiz</button>
                    </div>
                </form>
            </section>

            <!-- ===== Completion Section ===== -->
            <section id="section-complete" class="module-section text-center">
                <svg class="w-16 h-16 mx-auto text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <h2 class="text-2xl font-bold mt-4 mb-2">Congratulations!</h2>
                <p class="text-slate-700 mb-2">You've successfully completed the Cybersecurity Awareness module.</p>
                <p id="final-score" class="font-bold text-lg text-slate-800 mb-6"></p>

                <!-- Certificate -->
                <div id="certificate" class="mt-6 border-4 border-blue-600 p-6 rounded-lg bg-slate-50 text-center">
                    <h3 class="text-2xl font-bold text-blue-800">Certificate of Completion</h3>
                    <p class="mt-4">This certifies that</p>
                    <p id="cert-name" class="font-bold text-xl my-2">[Enter Your Name Below]</p>
                    <p>has successfully completed the Cybersecurity Awareness Training on</p>
                    <p id="cert-date" class="font-semibold mt-1"></p>
                </div>

                <input type="text" id="name-input" placeholder="Enter Your Full Name for Certificate" class="mt-4 w-full max-w-sm p-2 border border-slate-300 rounded-md text-center">

                <div class="mt-8">
                    <button type="button" onclick="window.print()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition">
                        Save/Print Certificate
                    </button>
                </div>
            </section>

        </main>
    </div>

    <script>
        // --- State Management ---
        let currentSection = 'section-intro';
        const totalSections = 4; // Intro doesn't count towards progress
        const foundPhishFlags = new Set();
        const correctAnswers = {
            q1: 'c',
            q2: 'c',
            q3: 'b',
            q4: 'b',
            q5: 'c'
        };

        // --- Navigation ---
        function navigateTo(sectionId) {
            // Hide current section
            const currentEl = document.getElementById(currentSection);
            if (currentEl) {
                currentEl.classList.remove('active');
            }

            // Show new section
            const newSection = document.getElementById(sectionId);
            newSection.classList.add('active');
            currentSection = sectionId;

            // Update progress bar
            updateProgressBar();
            window.scrollTo(0, 0);
        }

        function updateProgressBar() {
            let progress = 0;
            if (currentSection.startsWith('section-')) {
                const sectionNum = parseInt(currentSection.split('-')[1]);
                if (!isNaN(sectionNum)) {
                    progress = (sectionNum / totalSections) * 100;
                } else if (currentSection === 'section-quiz') {
                    progress = (4 / totalSections) * 100;
                }
            }
            if (currentSection === 'section-complete') {
                progress = 100;
            }
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        // --- Phishing Interaction (CORRECTED) ---
        function spotPhish(element, flagId) {
            if (foundPhishFlags.has(flagId)) {
                return; // Do nothing if already found
            }

            // Mark the element as found
            element.classList.add('found');
            foundPhishFlags.add(flagId);

            // Update the visual counter
            const counter = document.getElementById('phish-counter');
            counter.textContent = `Flags found: ${foundPhishFlags.size} / 5`;

            // Provide immediate feedback for the found flag
            const feedback = document.getElementById('phish-feedback');
            let message = '';
            switch (flagId) {
                case 1:
                    message = '<strong>Correct!</strong> Suspicious sender address. Legitimate companies use their own domain, not a generic one.';
                    break;
                case 2:
                    message = '<strong>Correct!</strong> An urgent and threatening subject line is a common tactic.';
                    break;
                case 3:
                    message = '<strong>Correct!</strong> A generic greeting like "Dear user" is a red flag.';
                    break;
                case 4:
                    message = '<strong>Correct!</strong> Spelling and grammar mistakes are unprofessional and suspicious.';
                    break;
                case 5:
                    message = '<strong>Correct!</strong> Hovering over this link would reveal a strange URL, not a corporate one.';
                    break;
            }
            feedback.innerHTML = `<p class="text-green-700 bg-green-100 p-2 rounded-md">${message}</p>`;

            // Check if the game is complete
            if (foundPhishFlags.size === 5) {
                // Add the completion message
                feedback.innerHTML += `<p class="text-blue-700 bg-blue-100 p-2 rounded-md mt-2 font-semibold">Great job! You found all the flags. You can now continue.</p>`;

                // Enable the continue button
                const continueButton = document.getElementById('section-2-continue');
                if (continueButton) {
                    continueButton.disabled = false;
                }
            }
        }


        // --- Password Strength Checker ---
        const passwordInput = document.getElementById('password-input');
        const strengthBar = document.getElementById('password-strength-bar');
        const strengthText = document.getElementById('password-strength-text');
        const criteria = {
            length: document.getElementById('crit-length'),
            lower: document.getElementById('crit-lower'),
            upper: document.getElementById('crit-upper'),
            number: document.getElementById('crit-number'),
            special: document.getElementById('crit-special'),
        };

        passwordInput.addEventListener('input', () => {
            const pass = passwordInput.value;
            let score = 0;

            // Criteria checks
            const hasLength = pass.length >= 12;
            const hasLower = /[a-z]/.test(pass);
            const hasUpper = /[A-Z]/.test(pass);
            const hasNumber = /[0-9]/.test(pass);
            const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(pass);

            if (hasLength) score++;
            if (hasLower) score++;
            if (hasUpper) score++;
            if (hasNumber) score++;
            if (hasSpecial) score++;

            // Update criteria list UI
            updateCriteriaUI('length', hasLength);
            updateCriteriaUI('lower', hasLower);
            updateCriteriaUI('upper', hasUpper);
            updateCriteriaUI('number', hasNumber);
            updateCriteriaUI('special', hasSpecial);

            // Update bar and text
            const width = (score / 5) * 100;
            strengthBar.style.width = `${width}%`;

            if (score <= 2) {
                strengthBar.className = 'h-2.5 rounded-full bg-red-500';
                strengthText.textContent = 'Weak';
                strengthText.className = 'text-sm mt-2 text-center font-medium text-red-500';
            } else if (score <= 4) {
                strengthBar.className = 'h-2.5 rounded-full bg-yellow-500';
                strengthText.textContent = 'Medium';
                strengthText.className = 'text-sm mt-2 text-center font-medium text-yellow-500';
            } else {
                strengthBar.className = 'h-2.5 rounded-full bg-green-500';
                strengthText.textContent = 'Strong';
                strengthText.className = 'text-sm mt-2 text-center font-medium text-green-500';
            }
        });

        function updateCriteriaUI(crit, met) {
            if (met) {
                criteria[crit].style.color = '#16a34a'; // green-600
                criteria[crit].innerHTML = `✓ ${criteria[crit].textContent.substring(2)}`;
            } else {
                criteria[crit].style.color = '#52525b'; // zinc-600
                criteria[crit].innerHTML = `- ${criteria[crit].textContent.substring(2)}`;
            }
        }

        // --- Quiz Logic ---
        const quizForm = document.getElementById('quiz-form');
        quizForm.addEventListener('submit', (e) => {
            e.preventDefault();
            let score = 0;
            const totalQuestions = Object.keys(correctAnswers).length;

            // Reset styles
            document.querySelectorAll('.quiz-option').forEach(el => {
                el.classList.remove('correct', 'incorrect');
            });

            for (const q in correctAnswers) {
                const userAnswer = quizForm.elements[q].value;
                const questionOptions = quizForm.elements[q];

                if (userAnswer) {
                    const selectedLabel = document.querySelector(`input[name="${q}"][value="${userAnswer}"]`).parentElement;
                    if (userAnswer === correctAnswers[q]) {
                        score++;
                        selectedLabel.classList.add('correct');
                    } else {
                        selectedLabel.classList.add('incorrect');
                        // Also highlight the correct one
                        const correctLabel = document.querySelector(`input[name="${q}"][value="${correctAnswers[q]}"]`).parentElement;
                        correctLabel.classList.add('correct');
                    }
                } else {
                    // Highlight correct answer if none was selected
                    const correctLabel = document.querySelector(`input[name="${q}"][value="${correctAnswers[q]}"]`).parentElement;
                    correctLabel.classList.add('correct');
                }
            }

            const resultText = document.getElementById('quiz-result');
            if (score >= 4) {
                resultText.innerHTML = `<p class="text-green-600">Passed! Your score: ${score} / ${totalQuestions}</p>`;
                setTimeout(() => {
                    document.getElementById('final-score').textContent = `Your Score: ${score} / ${totalQuestions}`;
                    navigateTo('section-complete');
                }, 1500);
            } else {
                resultText.innerHTML = `<p class="text-red-600">Failed. Your score: ${score} / ${totalQuestions}. Please review and try again.</p>`;
            }
        });

        // --- Certificate Logic ---
        const nameInput = document.getElementById('name-input');
        const certName = document.getElementById('cert-name');
        nameInput.addEventListener('input', () => {
            certName.textContent = nameInput.value || '[Enter Your Name Below]';
        });

        // Set certificate date
        document.getElementById('cert-date').textContent = new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
    </script>

</body>

</html>
